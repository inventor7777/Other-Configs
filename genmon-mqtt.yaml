# To get Genmon sensors direct into Home Assistant, simply add this to your configuration.yaml. If you already have an mqtt: block, just add the sensors part but keep the indentation :)
mqtt:
  sensor:
    - unique_id: "fd8f8c07-7d6f-4aea-92b5-16b7d8acc66b"
      expire_after: 310
      state_topic: 'generator/Outage/Status'
      name: Outage Status
      icon: mdi:weather-lightning
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
        manufacturer: "Genmon"
      
    - unique_id: "D2F2BA69-7EBE-4B13-AB6E-944E4EC710BB"
      expire_after: 310
      state_topic: 'generator/Status/Engine/Engine State'
      name: Engine State
      icon: mdi:engine
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "40160784-7061-4F21-A815-EEF5D1475B91"
      expire_after: 310
      state_topic: 'generator/Status/Engine/Switch State'
      name: Switch State
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "f565fed6-8a19-49d4-8066-4015c5ca91b1"
      expire_after: 310
      state_topic: 'generator/Status/Line/Utility Voltage'
      name: Utility Voltage
      device_class: voltage
      unit_of_measurement: "V"
      value_template: '{{ value | regex_replace(" V", "") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "713eb4b9-feec-4425-8c83-84a9f486aae7"
      expire_after: 310
      name: Battery Voltage
      device_class: voltage
      state_topic: 'generator/Status/Engine/Battery Voltage'
      unit_of_measurement: "V"
      value_template: '{{ value | regex_replace(" V", "") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "B4691EBA-66AC-4C01-8FBA-32FB21553554"
      expire_after: 310
      name: Battery Charger
      device_class: current
      state_topic: 'generator/Status/Engine/Battery Charger Current'
      unit_of_measurement: "mA"
      value_template: '{{ value | regex_replace(" mA", "") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "f3a8aedd-206b-4e5f-baa9-677496ee8d3c"
      expire_after: 310
      name: RPM
      unit_of_measurement: "RPM"
      state_topic: 'generator/Status/Engine/RPM'
      value_template: '{{ value | int }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "cbdc9c28-5748-4aef-91bc-5b5ec95ed545"
      expire_after: 310
      name: Frequency
      device_class: frequency
      unit_of_measurement: "Hz"
      state_topic: 'generator/Status/Engine/Frequency'
      value_template: '{{ value | regex_replace(" Hz","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "f5f462db-e16d-4596-9bd3-232b70fa5038"
      expire_after: 310
      name: Output Voltage
      device_class: voltage
      unit_of_measurement: "V"
      state_topic: 'generator/Status/Engine/Output Voltage'
      value_template: '{{ value | regex_replace(" V","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "10e1def6-35fd-4922-932a-90f25abb7f29"
      expire_after: 310
      name: Output Current
      device_class: current
      unit_of_measurement: "A"
      state_topic: 'generator/Status/Engine/Output Current'
      value_template: '{{ value | regex_replace(" A","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "254AB0C2-6E0F-4E9F-9867-6DC0B90A0D17"
      name: Fuel 30d
      unit_of_measurement: "ft³"
      state_topic: 'generator/Maintenance/Fuel Consumption in last 30 days'
      value_template: '{{ value | regex_replace(" cubic feet","") | float }}'
      icon: mdi:fuel
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "6402907C-A181-4D73-947E-8179AFBAB3DD"
      name: kWh 30d
      device_class: energy
      unit_of_measurement: "kWh"
      state_topic: 'generator/Maintenance/kW Hours in last 30 days'
      value_template: '{{ value | regex_replace(" kWh","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "914a4e97-54a0-41e7-bbeb-a256134e5e35"
      expire_after: 310
      name: Output Power
      device_class: power
      unit_of_measurement: "kW"
      state_topic: 'generator/Status/Engine/Output Power (Single Phase)'
      value_template: '{{ value | regex_replace(" kW","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "8cb64471-9123-48f6-b9be-15c01595981e"
      name: Last Alarm Log
      state_topic: 'generator/Status/Last Log Entries/Logs/Alarm Log'
      icon: mdi:alarm-light
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "bce3182a-a525-47dc-937c-8be4e5afc619"
      expire_after: 310
      name: Last Service Log
      state_topic: 'generator/Status/Last Log Entries/Logs/Service Log'
      icon: mdi:wrench-clock
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "bf48e972-0b96-489a-9eee-4f2030017c3f"
      expire_after: 310
      name: Last Action
      state_topic: 'generator/Status/Last Log Entries/Logs/Run Log'
      icon: mdi:motion-play-outline
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "825657b6-c67a-427a-bee9-7b6ea2182628"
      expire_after: 310
      name: Exercise Time
      state_topic: 'generator/Maintenance/Exercise/Exercise Time'
      icon: mdi:refresh-auto
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "DF3640D2-D7F0-417A-ABD5-1302872E5B52"
      expire_after: 310
      name: Activation Time
      state_topic: 'generator/Maintenance/Controller Settings/Time Since Activation'
      icon: mdi:sort-clock-ascending-outline
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "5D27A91F-45E0-493E-83AC-054750B7CC2F"
      expire_after: 310
      name: Engine Runtime 30d
      device_class: duration
      unit_of_measurement: "h"
      state_topic: 'generator/Maintenance/Run Hours in last 30 days'
      value_template: '{{ value | regex_replace(" h","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "01715416-D302-4369-A89F-DD9F9A22E28A"
      name: Total Engine Runtime
      device_class: duration
      unit_of_measurement: "h"
      state_topic: 'generator/Maintenance/Service/Total Run Hours'
      value_template: '{{ value | regex_replace(" h","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
      
    - unique_id: "68ADE9C0-7621-4A0F-B4FC-744B2F186434"
      expire_after: 310
      name: Ambient Temperature
      unit_of_measurement: "°F"
      device_class: temperature
      state_topic: 'generator/Maintenance/Ambient Temperature Sensor'
      value_template: '{{ value | regex_replace("F","") | float }}'
      device:
        name: "Generator"
        identifiers:
          - "generator_device"
 
    - unique_id: "792c8096-84a3-4870-ac23-8cc5dcc8f8f0"
      expire_after: 310
      name: CPU Temperature
      unit_of_measurement: "°F"
      device_class: temperature
      state_topic: 'generator/Monitor/Platform Stats/CPU Temperature'
      value_template: '{{ value | regex_replace("F","") | float }}'
      device:
        name: "Genmon"
        identifiers:
          - "genmon_device"
        manufacturer: "Genmon"
 
    - unique_id: "825657b6-c67a-427a-bee9-7b6ea2181001"
      name: Version
      state_topic: 'generator/Monitor/Generator Monitor Stats/Generator Monitor Version'
      icon: mdi:tag-text
      device:
        name: "Genmon"
        identifiers:
          - "genmon_device"
 
    - unique_id: "60b44a17-2535-47da-af10-7f6b45d35d3a"
      expire_after: 600
      name: CPU Load
      unit_of_measurement: '%'
      state_topic: 'generator/Monitor/Platform Stats/CPU Utilization'
      value_template: '{{ value | regex_replace(" *%","") | float }}'
      icon: mdi:chip
      device:
        name: "Genmon"
        identifiers:
          - "genmon_device"
 
    - unique_id: "3CDB1BB5-9F4F-4D6D-922C-D00EC9C27B7A"
      state_topic: "generator/Monitor/Platform Stats/WLAN Signal Level"
      expire_after: 310
      name: WLAN Signal Level
      value_template: '{{ value | regex_replace(" dBm", "") | float }}'
      unit_of_measurement: dBm
      device_class: signal_strength
      device:
        name: "Genmon"
        identifiers:
          - "genmon_device"
      
    - unique_id: "D5EDE9D5-9424-4730-BDDA-DC5D0DD90AB2"
      state_topic: "generator/Monitor/Platform Stats/WLAN ESSID"
      expire_after: 310
      name: WLAN SSID
      icon: mdi:wifi-settings
      device:
        name: "Genmon"
        identifiers:
          - "genmon_device"
 
# Commented to reduce DB writes from this contantly updating sensor 
#    - unique_id: "7c398cb0-43bf-469b-b49f-ae8b526cac32"
#      expire_after: 300
#      name: Uptime
#      state_topic: 'generator/Monitor/Platform Stats/System Uptime'
#       device:
#        name: "Genmon"
#        identifiers:
#          - "genmon_device"
